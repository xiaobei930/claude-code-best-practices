---
description: 任务粒度管理，分解和追踪任务
allowed-tools: Read, Glob, Grep, Bash, TodoWrite
---

# /task - 任务粒度管理

定义任务拆分标准和执行规范。

## 任务粒度标准

### 最小工作单元（原子任务）

**定义**: 不可再分的最小有意义操作

| 类型         | 示例                  | 预期时间  |
| ------------ | --------------------- | --------- |
| 创建文件     | 创建 `api/routes.py`  | 1-5 分钟  |
| 写单个函数   | 实现 `process_data()` | 5-15 分钟 |
| 修复单个 bug | 修复参数校验          | 5-30 分钟 |
| 添加单个测试 | 测试输入验证          | 5-10 分钟 |
| 更新配置     | 添加环境变量          | 1-5 分钟  |

### 复合任务（需拆分）

| 类型     | 拆分方式                   |
| -------- | -------------------------- |
| 集成模块 | 按接口 → 实现 → 测试       |
| 新功能   | 按数据层 → 逻辑层 → API 层 |
| 重构     | 按文件或按功能点           |

## 任务状态流转

```
待办 (pending)
  ↓ 开始执行
进行中 (in_progress)  ← 一次只能有一个
  ↓ 完成验证
已完成 (completed)

阻塞 (blocked) ← 遇到问题时
  ↓ 问题解决
回到进行中
```

## 执行规范

### 开始任务前

1. 确认任务定义清晰
2. 检查依赖是否就绪
3. 标记任务为 in_progress

### 执行任务中

1. 专注当前任务，不跳跃
2. 遇到阻塞立即记录
3. 小步验证，不累积

### 完成任务后

1. 验证产出符合预期
2. 更新任务状态为 completed
3. 更新 progress.md
4. 确定下一个任务

## 任务优先级

| 优先级 | 标识             | 含义     |
| ------ | ---------------- | -------- |
| P0     | 阻塞其他任务     | 立即处理 |
| P1     | 当前阶段必须完成 | 优先处理 |
| P2     | 可以延后         | 正常处理 |
| P3     | 可选优化         | 有空再做 |

## 任务拆分检查

**好的任务拆分**:

- [ ] 每个任务有明确的完成标准
- [ ] 每个任务可独立验证
- [ ] 任务间依赖关系清晰
- [ ] 单个任务不超过 30 分钟

**需要继续拆分的信号**:

- 任务描述超过 2 行
- 涉及多个文件的创建/修改
- 无法在 30 分钟内完成
- 完成标准模糊

> **记住**: 任务管理的核心是可追踪——每个任务有状态、有完成标准，才能避免遗漏。
